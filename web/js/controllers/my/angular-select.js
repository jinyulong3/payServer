!function(){function g(e){return e instanceof Object?jQuery.isEmptyObject(e):e instanceof String?"NULL"==e.toUpperCase()||"UNDEFINED"==e.toUpperCase()||"{}"==e:null==e||null==e}angular.module("angularSelect",[]).factory("selectController",function(){function e(n,e,t,r,i,a,l){function o(){var e=l(a.ngDataSource)(n.$parent);if(e instanceof Array)n.dataSource=e;else{var t=[];for(var r in e)t.push(e[r]);n.dataSource=t}}i(function(){a.ngDataSource&&n.$parent.$watch(a.ngDataSource,o)})}return e.$inject=["$scope","$http","$rootScope","$q","$timeout","$attrs","$parse"],e}).factory("selectView",function(){return'<select  style="min-width:80px"   ></select>'}).directive("angularSelect",["selectController","selectView","$timeout","$parse",function(e,t,m,v){return{restrict:"E",scope:{select:"&"},require:"ngModel",controller:e,template:t,compile:function(e,t,r){var n="$parent."+t.ngModel,i=$(e).find("select");i.attr("ng-model",n);var a=t.ngOptionsName||"name";return i.attr("ng-options","a."+a+" for a in dataSource"),"true"==t.multiple&&i.attr("multiple",t.multiple),"true"===t.disabled&&i.attr("disabled","disabled"),t.placeholder&&i.attr("data-placeholder",t.placeholder),{pre:function(){},post:l}}};function l(l,r,o,n){var e,i=!1,u=o.ngOptionsValue||"value",a=v(o.ngModel),c=v(o.ngModel+" = data"),t=$(r).find("select");t.change(function(){!function(){var e;if(i=!0,!g(o.multiple)&&"FALSE"!=o.multiple.toUpperCase()||"json"==o.ngModelType){var t=a(l.$parent);e=t}else{var r=a(l.$parent);e=r?r[u]:null,l.$apply(function(){c(l.$parent,{data:e})})}l.select&&l.$apply(function(){l.select({value:e})}),null!=o.require&&d()}()}),setTimeout(function(){t.select2({})}),n.$render=function(){m(function(){if(i)i=!1;else{var e=a(l.$parent);g(e)?t.select2({}):(t.val(e),t.select2("val",function(e){var t=l.dataSource||[];if(g(o.multiple)||"FALSE"==o.multiple.toUpperCase()){e instanceof Object&&(e=e[u]);for(var r=0;r<t.length;r++)if(t[r][u]===e)return r}if(e){var n=[];for(var i in e){var a=e[i];for(r=0;r<t.length;r++)t[r][u]!==a[u]||n.push(r)}return n}return[]}(e))),null!=o.require&&d()}})};var s,p="",f=1;if(null!=o.require){if(p=o.require?o.require:"必填项",!o.submitBtnId)throw new Error(directiveName+' must has "submit-btn-id" attribute!!');if(0==(e=$("#"+o.submitBtnId)).length)throw new Error('do not find submitBtn which id is "'+o.submitBtnId+'"!');e.click(function(){d()}),o.tipDirection&&(f=o.tipDirection)}function d(){var e=a(l.$parent);if(e&&0!=e.length)n.$setValidity("require",!0),layer.close(s),s=null;else{n.$setValidity("require",!1),s&&(layer.close(s),s=null);var t=$(r).find(".select2-container").attr("id");s=layer.tips(p,"#"+t,{tipsMore:!0,time:5e3,tips:f})}}}}])}();