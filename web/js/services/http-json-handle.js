angular.module("app").service("httpJsonHandle",["$http","$filter","$state","toaster","myConstants","$translate",function(u,d,s,c,m,n){this.myPost=function(t,e,s,n){var a={data:e,msgID:s,msgName:n,time:d("date")(new Date,"yyyy-MM-dd hh:mm:ss")};return u({method:"POST",url:t,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:a,timeout:m.TIMEOUT.timeout5s})},this.myPost2=function(t,e,s,n,a,o){var i=this,r={data:e,msgID:s,msgName:n,time:d("date")(new Date,"yyyy-MM-dd hh:mm:ss")};u({method:"POST",url:t,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:r,timeout:m.TIMEOUT.timeoutHttpJson}).then(function(t){i.judgeResCode(t.data.resCode,t.data.resMsg,o)&&a(t.data.data)},function(t){console.log("服务器通讯超时",t),c.pop("error",constantsLang[$scope.app.myData.lang].tips.webReq,constantsLang[$scope.app.myData.lang].tips.timeout,m.TIMEOUT.timeout5s)})},this.judgeResCode=function(t,e,s){switch(t){case m.resCode.SUCCESS:return!0;case m.resCode.LOGIN_TIMEOUT:case m.resCode.SESSION_IS_INVALID:return this.gosignin(n.instant("public.redirect"),s),!1;case m.resCode.LOGIN_OTHER:return this.gosignin(n.instant("public.invalidation")),!1;case m.resCode.REQUEST_TOO_FAST:return c.pop("warning",n.instant("public.warn"),n.instant("public.tooFast"),m.TIMEOUT.timeout2s),!1;default:return c.clear(),c.pop("error",n.instant("public.serverResponse"),e,m.TIMEOUT.timeout2s),!1}},this.gosignin=function(t,e){c.pop("error",n.instant("public.error"),t,m.TIMEOUT.timeout2s),setTimeout(function(){null!=e&&e.dismiss(0),s.go("access.signin")},m.TIMEOUT.timeout2s)}}]);